.include "constants.inc"
.segment "CODE"

.export draw_platform
.proc draw_platform
	PHP
	PHA
	TXA
	PHA
	TYA
	PHA

	; Small Platforms
	LDX #$30
	LDY #$21

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$68
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$69
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$76
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$77
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$84
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$85
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$9A
	STA PPUADDR
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$9B
	STA PPUADDR
	STX PPUDATA

	; 'Suns' ? (They're supposed to be suns with sunglasses lmao)
	LDA PPUSTATUS
	STY PPUADDR
	LDA #$86
	STA PPUADDR
	LDX #$31
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$87
	STA PPUADDR
	LDX #$32
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$A6
	STA PPUADDR
	LDX #$41
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$A7
	STA PPUADDR
	LDX #$42
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$98
	STA PPUADDR
	LDX #$31
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$99
	STA PPUADDR
	LDX #$32
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$B8
	STA PPUADDR
	LDX #$41
	STX PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$B9
	STA PPUADDR
	LDX #$42
	STX PPUDATA

	LDX #$64
	LDY #$83
	JSR draw_cloud

	LDX #$91
	LDY #$B0
	JSR draw_cloud

	LDX #$59
	LDY #$78
	JSR draw_cloud


	LDY #$AD
	LDX #$30

platform:
	LDA PPUSTATUS
	LDA #$21
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA

	INY
	CPY #$B3
	BNE platform

	LDY #$08
	LDX #$30

first_row:
	LDA PPUSTATUS
	LDA #$22
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA
	INY
	CPY #$18
	BNE first_row

	LDY #$29

second_row:
	LDA PPUSTATUS
	LDA #$22
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA
	INY
	CPY #$37
	BNE second_row

	LDY #$4A 

third_row:
	LDA PPUSTATUS
	LDA #$22
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA
	INY
	CPY #$56
	BNE third_row

	LDY #$6C

fourth_row:
	LDA PPUSTATUS
	LDA #$22
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA
	INY
	CPY #$74
	BNE fourth_row

	LDY #$8D

fifth_row:
	LDA PPUSTATUS
	LDA #$22
	STA PPUADDR
	STY PPUADDR
	STX PPUDATA
	INY
	CPY #$93
	BNE fifth_row

	LDY #$23

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$d9
	STA PPUADDR
	LDA #%00000100
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$de
	STA PPUADDR
	LDA #%00000001
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$c1
	STA PPUADDR
	LDA #%00100000
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$c9
	STA PPUADDR
	LDA #%00000010
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$c8
	STA PPUADDR
	LDA #%00001000
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$cc
	STA PPUADDR
	LDA #%0001010
	STA PPUDATA

	LDA PPUSTATUS
	STY PPUADDR
	LDA #$c6
	STA PPUADDR
	LDA #%10100000
	STA PPUDATA

	PLA
	TAY
	PLA
	TAX
	PLA
	PLP
	RTS
.endproc

.proc draw_cloud
	LDA PPUSTATUS
	LDA #$20
	STA PPUADDR
	STX PPUADDR
	LDA #$36
	STA PPUDATA

	INX

	LDA PPUSTATUS
	LDA #$20
	STA PPUADDR
	STX PPUADDR
	LDA #$37
	STA PPUDATA

	LDA PPUSTATUS
	LDA #$20
	STA PPUADDR
	STY PPUADDR
	LDA #$45
	STA PPUDATA

	INY

	LDA PPUSTATUS
	LDA #$20
	STA PPUADDR
	STY PPUADDR
	LDA #$46
	STA PPUDATA
	
	INY

	LDA PPUSTATUS
	LDA #$20
	STA PPUADDR
	STY PPUADDR
	LDA #$47
	STA PPUDATA


done:
	RTS
.endproc

